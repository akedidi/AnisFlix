<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Simple iOS</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: black;
            color: white;
            font-family: monospace;
        }
        .test {
            margin: 20px 0;
            padding: 10px;
            border: 1px solid #333;
            border-radius: 5px;
        }
        .success { border-color: green; }
        .error { border-color: red; }
    </style>
</head>
<body>
    <h1>üß™ Test Simple iOS - AnisFlix</h1>
    
    <div class="test">
        <h2>üì± Informations de base</h2>
        <div id="basic-info"></div>
    </div>
    
    <div class="test">
        <h2>üîç Test JavaScript</h2>
        <div id="js-test"></div>
    </div>
    
    <div class="test">
        <h2>üåê Test Capacitor</h2>
        <div id="capacitor-test"></div>
    </div>
    
    <div class="test">
        <h2>üìã Console Logs</h2>
        <div id="console-logs"></div>
    </div>

    <script>
        console.log('üöÄ Test Simple iOS d√©marr√©');
        
        function addLog(message, type = 'info') {
            const logsDiv = document.getElementById('console-logs');
            const logEntry = document.createElement('div');
            logEntry.style.margin = '5px 0';
            logEntry.style.color = type === 'error' ? 'red' : type === 'success' ? 'green' : 'white';
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logsDiv.appendChild(logEntry);
        }
        
        function updateBasicInfo() {
            const basicInfo = document.getElementById('basic-info');
            basicInfo.innerHTML = `
                <div><strong>User Agent:</strong> ${navigator.userAgent}</div>
                <div><strong>URL:</strong> ${window.location.href}</div>
                <div><strong>Screen:</strong> ${window.innerWidth}x${window.innerHeight}</div>
                <div><strong>Document Ready:</strong> ${document.readyState}</div>
            `;
            addLog('Informations de base mises √† jour', 'success');
        }
        
        function testJavaScript() {
            const jsTest = document.getElementById('js-test');
            try {
                // Test des fonctions JavaScript de base
                const testObj = { test: 'value' };
                const testArray = [1, 2, 3];
                const testFunction = () => 'test';
                
                jsTest.innerHTML = `
                    <div>‚úÖ Objets: ${JSON.stringify(testObj)}</div>
                    <div>‚úÖ Arrays: ${testArray.join(', ')}</div>
                    <div>‚úÖ Fonctions: ${testFunction()}</div>
                    <div>‚úÖ Date: ${new Date().toISOString()}</div>
                `;
                jsTest.parentElement.className = 'test success';
                addLog('Tests JavaScript r√©ussis', 'success');
            } catch (error) {
                jsTest.innerHTML = `<div style="color: red;">‚ùå Erreur JavaScript: ${error.message}</div>`;
                jsTest.parentElement.className = 'test error';
                addLog('Erreur JavaScript: ' + error.message, 'error');
            }
        }
        
        function testCapacitor() {
            const capacitorTest = document.getElementById('capacitor-test');
            try {
                if (typeof window !== 'undefined' && window.Capacitor) {
                    const isNative = window.Capacitor.isNativePlatform();
                    const platform = window.Capacitor.getPlatform();
                    
                    capacitorTest.innerHTML = `
                        <div>‚úÖ Capacitor disponible</div>
                        <div>‚úÖ Mode natif: ${isNative ? 'Oui' : 'Non'}</div>
                        <div>‚úÖ Plateforme: ${platform}</div>
                    `;
                    capacitorTest.parentElement.className = 'test success';
                    addLog('Capacitor fonctionne correctement', 'success');
                } else {
                    capacitorTest.innerHTML = `
                        <div>‚ö†Ô∏è Capacitor non disponible</div>
                        <div>Mode web d√©tect√©</div>
                    `;
                    capacitorTest.parentElement.className = 'test';
                    addLog('Capacitor non disponible (mode web)', 'info');
                }
            } catch (error) {
                capacitorTest.innerHTML = `<div style="color: red;">‚ùå Erreur Capacitor: ${error.message}</div>`;
                capacitorTest.parentElement.className = 'test error';
                addLog('Erreur Capacitor: ' + error.message, 'error');
            }
        }
        
        // Lancer les tests
        document.addEventListener('DOMContentLoaded', function() {
            addLog('DOM charg√©', 'success');
            updateBasicInfo();
            testJavaScript();
            testCapacitor();
        });
        
        // Test d'erreur volontaire pour v√©rifier la gestion d'erreurs
        setTimeout(() => {
            addLog('Test d\'erreur volontaire dans 3 secondes...', 'info');
            setTimeout(() => {
                try {
                    throw new Error('Test d\'erreur volontaire');
                } catch (error) {
                    addLog('Erreur captur√©e: ' + error.message, 'error');
                }
            }, 3000);
        }, 1000);
    </script>
</body>
</html>
